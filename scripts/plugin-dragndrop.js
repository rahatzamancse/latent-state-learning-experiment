var jsPsychDragndrop=function(e){"use strict";function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}var r={name:"dragndrop",parameters:{element:{type:e.ParameterType.IMAGE,default:void 0},buckets:{type:e.ParameterType.COMPLEX,default:void 0},show_labels:{type:e.ParameterType.BOOL,default:!1},bucket_labels:{type:e.ParameterType.COMPLEX,default:void 0},text_prompt:{type:e.ParameterType.STRING,default:""},radius:{type:e.ParameterType.INT,default:400},track_dragging:{type:e.ParameterType.BOOL,default:!1},randomize_bucket_order:{type:e.ParameterType.BOOL,default:!1},correct_bucket_index:{type:e.ParameterType.INT,default:void 0}}},o=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.jsPsych=t},n=[{key:"trial",value:function(e,t){var n=this.jsPsych;e.innerHTML="";for(var r=document.createElement("div"),o=[],i=0;i<t.buckets.length;i++)r.innerHTML+='<div id="jspsych-dragndrop-bucket-'.concat(i,'" class="jspsych-dragndrop-bucket">\n        <img src="').concat(t.buckets[i],'" class="jspsych-dragndrop-bucket-img" />\n        ').concat(t.show_labels?"<p>"+t.bucket_labels[i]+"</p>":"","\n      </div>");r.innerHTML+='<div class="wrapper" style="display: inline-grid; grid-template-rows: 1fr; grid-template-columns: 1fr; background-color: white;">\n      <div id="jspsych-dragndrop-element" class="jspsych-dragndrop-element" style="transform: scale(0.5); transform-origin: 0 0;">\n        '.concat(t.element,"\n      </div>\n    </div>\n    ");for(var a=window.innerWidth/2,l=window.innerHeight/2,s=t.buckets.length,c=360/s,d=t.radius,p=[],u=[],g=0;g<s;g++)p.push(a+d*Math.cos(c*g*Math.PI/180)),u.push(l+d*Math.sin(c*g*Math.PI/180));r.innerHTML+='\n      <div id="jspsych-dragndrop-text-prompt" style="width: 100%; margin=100px; position: absolute; bottom: 10px; left: 0">\n        <p>\n          '.concat(t.text_prompt,"\n        </p>\n      </div>\n    "),r.innerHTML+="\n      <style>\n        .jspsych-dragndrop-bucket {\n          width: 200px;\n          height: 200px;\n          display: inline-block;\n          margin: 10px;\n          border: 1px solid #aaa;\n          position: absolute;\n        }\n        .jspsych-dragndrop-bucket-img {\n          width: 100%;\n          height: 100%;\n        }\n        .jspsych-dragndrop-element {\n          width: 200px;\n          height: 200px;\n          position: absolute;\n          z-index: 10;\n          cursor: pointer;\n          user-select: none;\n        }\n        .jspsych-dragndrop-element-img {\n          width: 100%;\n          height: 100%;\n        }\n      </style>\n    ";for(var y=t.randomize_bucket_order?n.randomization.shuffle(Array.from(Array(t.buckets.length).keys())):Array.from(Array(t.buckets.length).keys()),m=0;m<s;m++){var f=y[m],h=r.querySelector("#jspsych-dragndrop-bucket-".concat(f));h.style.left=p[m]-100+"px",h.style.top=u[m]-100+"px"}var b=r.querySelector("#jspsych-dragndrop-element");b.style.left=a-100+"px",b.style.top=l-100+"px",b.addEventListener("mousedown",(function(e){e.preventDefault();var i=e.clientX-b.getBoundingClientRect().left,c=e.clientY-b.getBoundingClientRect().top,d=[],p=setInterval((function(){d.push({x:b.getBoundingClientRect().left+100,y:b.getBoundingClientRect().top+100,time:n.getTotalTime()})}),10);function u(e){b.style.left=e.clientX-i+"px",b.style.top=e.clientY-c+"px"}document.addEventListener("mousemove",u),document.addEventListener("mouseup",(function e(){clearInterval(p),document.removeEventListener("mousemove",u),o.push(d);for(var i=null,c=0;c<s;c++){var g=r.querySelector("#jspsych-dragndrop-bucket-".concat(c)).getBoundingClientRect();if(b.getBoundingClientRect().left>g.left&&b.getBoundingClientRect().left<g.right&&b.getBoundingClientRect().top>g.top&&b.getBoundingClientRect().top<g.bottom||b.getBoundingClientRect().right>g.left&&b.getBoundingClientRect().right<g.right&&b.getBoundingClientRect().top>g.top&&b.getBoundingClientRect().top<g.bottom||b.getBoundingClientRect().left>g.left&&b.getBoundingClientRect().left<g.right&&b.getBoundingClientRect().bottom>g.top&&b.getBoundingClientRect().bottom<g.bottom||b.getBoundingClientRect().right>g.left&&b.getBoundingClientRect().right<g.right&&b.getBoundingClientRect().bottom>g.top&&b.getBoundingClientRect().bottom<g.bottom){i=c;break}}if(null===i)b.style.transition="left 0.5s, top 0.5s",b.style.left=a-100+"px",b.style.top=l-100+"px",setTimeout((function(){b.style.transition=""}),500);else{b.remove();var y={drag_data:o,drop_bucket:i,is_correct:i===t.correct_bucket_index};n.finishTrial(y)}document.removeEventListener("mouseup",e)}))})),e.appendChild(r),console.log(e.outerHTML)}}],n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();return o.info=r,o}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
